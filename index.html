<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KCC Billing OS â€” Krishna Kidney Centre</title>

    <!-- FONTS -->
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Mulish:wght@400;600;700;800&display=swap" rel="stylesheet" />

    <!-- GLOBAL CSS -->
    <link rel="stylesheet" href="style.css" />
</head>

<body>

<!-- ============================================================
     SIDEBAR â€” Premium Medical Dashboard
============================================================ -->
<aside class="sidebar">
    <div class="sidebar-header">
        <img src="assets/logo.png" class="logo" />
        <h2>KCC Billing OS</h2>
    </div>

    <nav class="menu">
        <button class="menu-item active" data-panel="dashboardPanel">Dashboard</button>
        <button class="menu-item" data-panel="newBillPanel">Create Bill</button>
        <button class="menu-item" data-panel="tariffPanel" onclick="window.location.href='tariff/tariff.html'">Tariff Master</button>
        <button class="menu-item" data-panel="historyPanel">Bill History</button>
        <button class="menu-item" data-panel="settingsPanel">Settings</button>
    </nav>
</aside>

<!-- ============================================================
     TOP NAVBAR
============================================================ -->
<header class="topbar">
    <h1 id="pageTitle">Dashboard</h1>
    <div class="top-actions">
        <button id="themeToggle">ðŸŒ—</button>
        <button id="printBtn" onclick="openPrintBill()" class="hidden">ðŸ–¨ Print</button>
    </div>
</header>

<!-- ============================================================
     MAIN CONTENT AREA
============================================================ -->
<main id="mainContent">

    <!-- ============================================================
         DASHBOARD PANEL
    ============================================================ -->
    <section id="dashboardPanel" class="panel active">
        <h2>Welcome to Krishna Kidney Centre Billing OS</h2>
        <p>Select "Create Bill" to begin billing a patient.</p>

        <div class="stats-grid">
            <div class="stat-card">
                <h3>Total Bills Today</h3>
                <p id="statToday">0</p>
            </div>
            <div class="stat-card">
                <h3>Revenue Today</h3>
                <p id="statRevenue">â‚¹0</p>
            </div>
            <div class="stat-card">
                <h3>Active Admissions</h3>
                <p id="statAdmissions">0</p>
            </div>
        </div>
    </section>

    <!-- ============================================================
         NEW BILL PANEL â€” Patient Registration + Billing
    ============================================================ -->
    <section id="newBillPanel" class="panel">

        <h2>Patient Registration</h2>

        <div class="card">
            <div class="form-grid">
                <div>
                    <label>Patient Name</label>
                    <input type="text" id="p_name" placeholder="Enter full name" />
                </div>

                <div>
                    <label>UHID (Auto)</label>
                    <input type="text" id="p_uhid" readonly />
                </div>

                <div>
                    <label>Age</label>
                    <input type="number" id="p_age" />
                </div>

                <div>
                    <label>Gender</label>
                    <select id="p_gender">
                        <option value="">Select</option>
                        <option>Male</option>
                        <option>Female</option>
                        <option>Other</option>
                    </select>
                </div>

                <div>
                    <label>Consultant Doctor</label>
                    <select id="p_doctor"></select>
                </div>

                <div>
                    <label>Mode of Payment</label>
                    <select id="p_payment">
                        <option>Cash</option>
                        <option>UPI</option>
                        <option>Card</option>
                    </select>
                </div>
            </div>
        </div>

        <h2>Admission Details</h2>

        <div class="card">
            <div class="form-grid">
                <div>
                    <label>Date of Admission</label>
                    <input type="date" id="p_doa" onchange="calculateLOS()" />
                </div>

                <div>
                    <label>Date of Discharge</label>
                    <input type="date" id="p_dod" onchange="calculateLOS()" />
                </div>

                <div>
                    <label>Total Days (Auto)</label>
                    <input type="number" id="p_los" readonly />
                </div>
            </div>
        </div>

        <!-- ============================================================
             ROOM & WARD SHIFTING
        ============================================================ -->
        <h2>Room / Ward Charges</h2>

        <div class="card">
            <button class="add-btn" onclick="addRoomShift()">+ Add Room / ICU Shift</button>

            <div id="roomShiftContainer"></div>
        </div>

        <!-- ============================================================
             CONSULTATION CHARGES
        ============================================================ -->
        <h2>Consultation Charges</h2>

        <div class="card">
            <button class="add-btn" onclick="addConsultation()">+ Add Consultant Visit</button>

            <div id="consultationContainer"></div>
        </div>

        <!-- ============================================================
             INVESTIGATIONS FROM TARIFF
        ============================================================ -->
        <h2>Investigations</h2>

        <div class="card">
            <button class="add-btn" onclick="addInvestigation()">+ Add Investigation</button>

            <div id="investigationContainer"></div>
        </div>

        <!-- ============================================================
             PHARMACY FROM TARIFF
        ============================================================ -->
        <h2>Pharmacy</h2>

        <div class="card">
            <button class="add-btn" onclick="addPharmacy()">+ Add Pharmacy Item</button>

            <div id="pharmacyContainer"></div>
        </div>

        <!-- ============================================================
             FINAL BILL SUMMARY
        ============================================================ -->
        <h2>Final Bill Summary</h2>

        <div class="card summary-card">
            <div class="summary-row">
                <span>Total Room Charges</span>
                <span id="sum_room">â‚¹0</span>
            </div>

            <div class="summary-row">
                <span>Total Consultant Charges</span>
                <span id="sum_consult">â‚¹0</span>
            </div>

            <div class="summary-row">
                <span>Total Investigation</span>
                <span id="sum_investigation">â‚¹0</span>
            </div>

            <div class="summary-row">
                <span>Total Pharmacy</span>
                <span id="sum_pharmacy">â‚¹0</span>
            </div>

            <div class="summary-row total">
                <span>Grand Total</span>
                <span id="sum_total">â‚¹0</span>
            </div>

            <button class="primary-btn" onclick="saveBill()">Save Bill</button>
            <button class="print-btn" onclick="openPrintBill()">Print / Export PDF</button>
        </div>
    </section>

    <!-- HISTORY SECTION (blank for now) -->
    <section id="historyPanel" class="panel">
        <h2>Bill History</h2>
        <p>Coming next once data is savedâ€¦</p>
    </section>

    <!-- SETTINGS SECTION -->
    <section id="settingsPanel" class="panel">
        <h2>Settings</h2>
        <p>Theme, Export options, Data management, etc.</p>
    </section>

</main>

<!-- GLOBAL JS -->
<script src="utils/id-generator.js"></script>
<script src="utils/date-utils.js"></script>
<script src="utils/format.js"></script>
<script src="app.js"></script>

</body>
</html>
