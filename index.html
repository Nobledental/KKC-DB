<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>KCC Billing OS — Krishna Kidney Centre</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="style.css">
<script defer src="app.js"></script>
</head>

<body>

<!-- ============================================================
     SIDEBAR
============================================================ -->
<aside class="sidebar">
  <div class="sidebar-header">
    <div class="sidebar-logo">KKC</div>
    <h2>Krishna Kidney Centre</h2>
  </div>

  <nav class="sidebar-nav">
    <button data-screen="billingScreen" class="active">Billing</button>
    <button data-screen="tariffScreen">Tariff</button>
    <button data-screen="historyScreen">Bill History</button>
  </nav>
</aside>



<!-- ============================================================
     MAIN CONTENT
============================================================ -->
<main id="mainPanel">

  <!-- ============================================================
       BILLING SCREEN
  ============================================================ -->
  <section id="billingScreen" class="screen active">

    <h1 class="ui-title">KCC Billing System</h1>

    <!-- Patient Details -->
    <div class="ui-card">
      <h2>Patient Details</h2>

      <div class="ui-row-3">
        <div><label>Name</label><input id="ui_name" type="text"></div>
        <div><label>Age</label><input id="ui_age" type="number"></div>
        <div><label>Gender</label>
          <select id="ui_gender"><option>Male</option><option>Female</option><option>Other</option></select>
        </div>
      </div>

      <div class="ui-row-3">
        <div><label>UHID</label><input id="ui_uhid" type="text"></div>
        <div><label>IP Number</label><input id="ui_ip" type="text"></div>
        <div><label>Room</label><select id="ui_roomCat"></select></div>
      </div>

      <div class="ui-row-2">
        <div><label>Admission Date</label><input id="ui_doa" type="datetime-local"></div>
        <div><label>Discharge Date</label><input id="ui_dod" type="datetime-local"></div>
      </div>

      <div class="ui-row-2">
        <div><label>Consultant</label><select id="ui_doc"></select></div>
        <div><label>Speciality</label><input id="ui_spec" value="Urology" type="text"></div>
      </div>

      <div class="ui-row-2">
        <div><label>Insurance?</label>
          <select id="ui_ins"><option>No</option><option>Yes</option></select>
        </div>
        <div><label>Insurance Name</label><input id="ui_insName" type="text"></div>
      </div>

    </div>


    <!-- Billing Items -->
    <div class="ui-card">
      <h2>Add Billing Item</h2>

      <div class="ui-row-4">
        <div><label>Category</label>
          <select id="ui_cat">
            <option>Consultation</option>
            <option>Room Rent</option>
            <option>Nursing</option>
            <option>Doctor Visit</option>
            <option>Pharmacy</option>
            <option>Investigation</option>
            <option>OT</option>
            <option>Surgical</option>
            <option>Package</option>
            <option>Returns</option>
          </select>
        </div>

        <div><label>Date</label><input id="ui_date" type="date"></div>
        <div><label>Description</label><input id="ui_desc" type="text"></div>
        <div><label>Rate</label><input id="ui_rate" type="number"></div>
      </div>

      <div class="ui-row-3">
        <div><label>Qty</label><input id="ui_qty" type="number"></div>
        <div><label>Copay %</label><input id="ui_copay" type="number" value="0"></div>
        <div><button class="btn primary full" onclick="addItem()">Add Item</button></div>
      </div>
    </div>


    <!-- Receipts -->
    <div class="ui-card">
      <h2>Add Receipt</h2>

      <div class="ui-row-3">
        <div><label>Date</label><input id="ui_rdate" type="date"></div>
        <div><label>Amount</label><input id="ui_ramt" type="number"></div>
        <div><label>Mode</label>
          <select id="ui_rmode"><option>Cash</option><option>UPI</option><option>Card</option></select>
        </div>
      </div>

      <button class="btn primary" onclick="addReceipt()">Add Receipt</button>
    </div>


    <!-- Table -->
    <div class="ui-card">
      <h2>Billing Items</h2>
      <table class="bill-ui-table">
        <thead>
          <tr>
            <th>Category</th><th>Date</th><th>Description</th>
            <th>Rate</th><th>Qty</th><th>Gross</th><th>Net</th>
          </tr>
        </thead>
        <tbody id="ui_billBody"></tbody>
      </table>
    </div>


    <!-- Summary -->
    <div class="ui-card">
      <h2>Summary</h2>

      <div class="sum-ui-row"><span>Gross</span><strong id="ui_s_gross">₹0</strong></div>
      <div class="sum-ui-row"><span>Returns</span><strong id="ui_s_ret">₹0</strong></div>
      <div class="sum-ui-row"><span>Receipts</span><strong id="ui_s_rec">₹0</strong></div>

      <div class="sum-ui-row total"><span>Final Payable</span><strong id="ui_s_final">₹0</strong></div>

      <button class="btn primary" onclick="saveBill()">Save Bill</button>
      <button class="btn print-btn" onclick="preparePrint()">Print Bill</button>
    </div>

  </section>



  <!-- ============================================================
       TARIFF SCREEN
  ============================================================ -->
  <section id="tariffScreen" class="screen">

    <h1 class="ui-title">Tariff Master</h1>

    <div class="ui-card">
      <h2>Rooms</h2>
      <div id="tariff_rooms"></div>
      <button class="btn primary" onclick="addRoom()">Add Room</button>
    </div>

    <div class="ui-card">
      <h2>Doctors</h2>
      <div id="tariff_doctors"></div>
      <button class="btn primary" onclick="addDoctor()">Add Doctor</button>
    </div>

    <div class="ui-card">
      <h2>Surgical Packages</h2>
      <div id="tariff_packages"></div>
      <button class="btn primary" onclick="addPackage()">Add Package</button>
    </div>

    <button class="btn primary" onclick="saveTariff()">Save Tariff</button>
  </section>



  <!-- ============================================================
       HISTORY SCREEN
  ============================================================ -->
  <section id="historyScreen" class="screen">
    <h1 class="ui-title">Bill History</h1>

    <div class="ui-card">
      <table class="bill-ui-table">
        <thead>
          <tr>
            <th>Bill No</th><th>Patient</th><th>UHID</th><th>Date</th><th>Action</th>
          </tr>
        </thead>
        <tbody id="historyTable"></tbody>
      </table>
    </div>
  </section>

</main>



<!-- ============================================================
     PRINT BILL — A4 LAYOUT
============================================================ -->
<div class="container" id="billContainerFinal">

    <div class="header-flex">
        <div class="logo-area">
            <div class="logotype">KKC</div>
            <div class="h-info">
                <h1 class="h-title">KRISHNA KIDNEY CENTRE</h1>
                <p class="h-sub">No.1/375-7, Rayakottai Main Road, Near Flyover, Krishnagiri - 635001</p>
                <p class="h-sub">Mobile: 8300224569 / 9442318169 • Email: bksrinivasan1980@yahoo.co.in</p>
                <p class="h-sub tamil">மருத்துவர்: சிறுநீர் பாதை நோய்கள் சேவை</p>
            </div>
        </div>

        <div class="invoice-block">
            <span class="invoice-label">HOSPITAL BREAK-UP BILL</span>
            <p class="small-meta">Bill No: <strong id="b_invoice">-</strong></p>
        </div>
    </div>

    <div class="doctor-line" id="doctorLine">
        Dr. B.K. SRINIVASAN, M.S, M.Ch. (Urology) — UROLOGIST & ANDROLOGIST — Regd No: 73759
    </div>

    <div class="compact-line" id="b_compactLine"></div>

    <div class="section">
        <div class="column-title">Patient & Billing Details</div>

        <div class="details-grid">
            <div><label>Name</label><p id="b_name"></p></div>
            <div><label>Age / Gender</label><p id="b_age_gender"></p></div>
            <div><label>D.O.A</label><p id="b_doa"></p></div>
            <div><label>D.O.D</label><p id="b_dod"></p></div>
            <div><label>Consultant</label><p id="b_doc"></p></div>
            <div><label>Speciality</label><p id="b_spec"></p></div>
            <div><label>Insurance</label><p id="b_ins"></p></div>
        </div>
    </div>

    <div class="section">
        <div class="column-title">Billing Items</div>

        <div class="column-header-row">
            <div class="column-header">Description</div>
            <div class="column-header">Charges/U</div>
            <div class="column-header">Units</div>
            <div class="column-header">Total</div>
        </div>

        <div class="column-detail" id="b_items"></div>
    </div>

    <div class="section">
        <div class="column-title">Summary</div>

        <div class="summary-box">
            <div class="sum-line"><span>Total Gross</span><strong id="s_gross">₹0</strong></div>
            <div class="sum-line total"><span>Final Amount</span><strong id="s_final">₹0</strong></div>
        </div>
    </div>
</div>


<!-- RECEIPT PAGE -->
<div class="container receipt-container" id="receiptContainer">
    <div class="section">
        <div class="column-title">Payment Receipts</div>

        <div class="summary-box">
            <div id="receiptLines"></div>

            <div class="sum-line total">
                <span>Total Receipts</span><strong id="rc_total">₹0</strong>
            </div>

            <div class="sum-final">
                <span>Balance Payable</span><strong id="rc_balance">₹0</strong>
            </div>
        </div>
    </div>
</div>


</body>
</html>
