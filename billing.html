<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>KCC Billing — Final Bill</title>

<link rel="stylesheet" href="billing.css" />
<script defer src="engine.js"></script>
</head>

<body>

<div id="page">

    <!-- =====================================================
         HEADER
    ====================================================== -->
    <div class="header-flex">
        <div class="logo-area">
            <div class="logotype" id="logo">KKC</div>
            <div class="h-info">
                <h1 class="h-title">KRISHNA KIDNEY CENTRE</h1>
                <p class="h-sub">No.1/375-7, Rayakottai Main Road, Krishnagiri - 635001</p>
                <p class="h-sub">Mobile: 8300224569 / 9442318169 • Email: bksrinivasan1980@yahoo.co.in</p>
            </div>
        </div>

        <div class="invoice-block">
            <span class="invoice-label">FINAL BILL</span>
            <p class="small-meta">Bill No: <strong id="billNo">AUTO</strong></p>
            <p class="small-meta">IP No: <strong id="ipNo">AUTO</strong></p>
            <p class="small-meta">UHID: <strong id="uhid">AUTO</strong></p>
        </div>
    </div>

    <!-- =====================================================
         COMPACT LINE
    ====================================================== -->
    <div class="compact-line" id="compactLine">
        Name: <strong id="pName">-</strong> &nbsp;•&nbsp;
        Age/Sex: <strong id="pAge">-</strong> &nbsp;•&nbsp;
        Bed: <strong id="pBed">-</strong> &nbsp;•&nbsp;
        Payor: <strong id="pPayor">Self Pay</strong>
    </div>

    <!-- =====================================================
         PATIENT DETAILS GRID
    ====================================================== -->
    <div class="section">
        <div class="column-title">Patient & Billing Details</div>

        <div class="details-grid">

            <div><label>Patient Name</label><p id="fName" class="editable">-</p></div>
            <div><label>Age / Gender</label><p id="fAge" class="editable">-</p></div>
            <div><label>Admission Date</label><p id="fDOA" class="editable-date">-</p></div>

            <div><label>Discharge Date</label><p id="fDOD" class="editable-date">-</p></div>
            <div><label>Consultant</label><p id="fConsult" class="editable-dropdown" data-type="consultant">Dr. B.K. Srinivasan</p></div>
            <div><label>Speciality</label><p id="fSpec" class="editable-dropdown" data-type="dept">Urology</p></div>

            <div><label>Type of Admission</label><p id="fAdmType" class="editable-dropdown" data-type="admissionType">Planned</p></div>
            <div><label>Department</label><p id="fDept" class="editable-dropdown" data-type="dept">Urology</p></div>
            <div><label>Payor Category</label><p id="fPayor" class="editable-dropdown" data-type="payor">Self Pay</p></div>

        </div>
    </div>

    <!-- =====================================================
         ROOM STAY (MODAL BUTTON)
    ====================================================== -->
    <div class="section">
        <div class="column-title">Room Stay & Daily Charges</div>

        <button id="addRoomStayBtn" class="action-btn">+ Add Room Stay</button>

        <div id="roomStayList"></div>
    </div>

    <!-- =====================================================
         BILLING TABLE
    ====================================================== -->
    <div class="section">
        <div class="column-title">Billing Items</div>

        <div class="column-header-row">
            <div class="column-header">Description</div>
            <div class="column-header">Rate</div>
            <div class="column-header">Qty</div>
            <div class="column-header">Total</div>
        </div>

        <div id="billItems"></div>

        <button id="addManualItemBtn" class="action-btn">+ Add Item</button>
    </div>

    <!-- =====================================================
         SUMMARY
    ====================================================== -->
    <div class="section">
        <div class="column-title">Summary</div>

        <div class="summary-box">
            <div class="sum-line"><span>Total Gross</span> <strong id="sumGross">₹0</strong></div>
            <div class="sum-line"><span>Total Receipts</span> <strong id="sumRec">₹0</strong></div>

            <div class="sum-line total"><span>Balance</span> <strong id="sumBal">₹0</strong></div>
        </div>
    </div>

    <!-- =====================================================
         PRINT BUTTON
    ====================================================== -->
    <button class="print-btn" onclick="window.print()">PRINT / EXPORT BILL</button>

</div>

<!-- ============================================================
     ROOM STAY POPUP MODAL
============================================================ -->
<div id="roomModal" class="modal">
    <div class="modal-box">

        <h3>Add Room Stay</h3>

        <label>Room Type</label>
        <select id="rm_type"></select>

        <label>From Date</label>
        <input type="date" id="rm_from">

        <label>To Date</label>
        <input type="date" id="rm_to">

        <div class="modal-actions">
            <button id="saveRoomStay">SAVE</button>
            <button id="closeRoomStay">CANCEL</button>
        </div>
    </div>
</div>

<!-- ============================================================
     MANUAL ITEM MODAL
============================================================ -->
<div id="itemModal" class="modal">
    <div class="modal-box">
        <h3>Add Item</h3>

        <label>Description</label>
        <input type="text" id="mi_desc">

        <label>Rate</label>
        <input type="number" id="mi_rate">

        <label>Qty</label>
        <input type="number" id="mi_qty" value="1">

        <div class="modal-actions">
            <button id="saveManualItem">SAVE</button>
            <button id="closeManualItem">CANCEL</button>
        </div>
    </div>
</div>

</body>
</html>
